# MySQL
## Домашнее задание по теме _MySQL: Backup + Репликация_  
> В материалах приложены ссылки на вагрант для репликации и дамп базы bet.dmp  
Базу развернуть на мастере и настроить так, чтобы реплицировались таблицы:  
| bookmaker |  
| competition |  
| market |  
| odds |  
| outcome  
Настроить GTID репликацию  
варианты которые принимаются к сдаче:  
> * рабочий вагрантафайл  
> * скрины или логи SHOW TABLES  
> * конфиги*  
> * пример в логе изменения строки и появления строки на реплике*  

### Решение ДЗ.  
Запуск машин, установка _Percona_ и копирование конфигурационных файлов на хосты выполняется при помощи _Vagrantfile_.  
Разворачивание _MySQL_ осуществляется при помощи скриптов _setup.sh_.  
После выполнения всех процедур подключаемся к _master_  и проверяем корректность работы репликации.    
Для этого подключаемся к базе _bet_, смотрим таблицы и состав таблицы _bookmaker_.  
Затем добавляем запись в эту таблицу и снова проверяем её состав.  
Как видно, запись добавилась.  

![](https://github.com/Vitaliy7/MySQL/blob/main/screenshots/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-05-16%2009-14-05.png?raw=true)

Теперь подключимся к слейву и вначале проверим статус:  

![](https://github.com/Vitaliy7/MySQL/blob/main/screenshots/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-05-16%2009-10-43.png?raw=true)

Статус актуален. Так же, как и на мастере, подключаемся к базе _bet_, смотрим таблицы и состав таблицы _bookmaker_.  

![](https://github.com/Vitaliy7/MySQL/blob/main/screenshots/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-05-16%2009-15-32.png?raw=true)

Видим, что таблицы _events_on_demand_ и _v_same_event_ у нас не реплицируются, как мы и указали в файле _05-binlog.cnf_.  
Первая выборка из таблицы _bookmaker_ сделана до того, как мы добавили запись на мастере, вторая после добавления.  
Репликация проходит успешно.  
Для проверки работы репликации также можно использовать утилиту ```mysqlbinlog```  

![](https://github.com/Vitaliy7/MySQL/blob/main/screenshots/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-05-16%2009-19-36.png?raw=true)

Пароль для подключения к базам (мастер и слейв): Otus2023!
